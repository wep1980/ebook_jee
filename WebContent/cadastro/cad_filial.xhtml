<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:sec="http://www.springframework.org/security/facelets/tags"
	xmlns:util="http://java.sun.com/jsf/composite/components"
	xmlns:p="http://primefaces.org/ui">

<ui:composition template="/templates/templatePrincipal.xhtml">
	<ui:define name="corpo">
		<h:form id="formCadastro" prependId="false">
		<c:set var="isCadastro" value="true" scope="view"/>
			<p:panel header="Cadastro de Filial" id="panelCadastro">
				<p:panelGrid id="gridFilial" columns="3">
					<p:column>
						<p:row>
							<h:outputLabel for="id" value="Código : " id="labelId"
								style="width:300px;" />
						</p:row>
					</p:column>
					<p:column>
						<p:row>
							<p:inputText id="id" styleClass="estiloIdCastro"
								value="#{filialBeanView.objetoSelecionado.fil_codigo}"
								readonly="true" />
						</p:row>
					</p:column>
					<p:column />



					<p:column>
						<p:row>
							<h:outputLabel for="filDescricao" id="labelDescricao"
								value="Descrição * : " />
						</p:row>
					</p:column>
					<p:column>
						<p:row>
							<p:inputText id="filDescricao"
								value="#{filialBeanView.objetoSelecionado.fil_descricao}"
								required="true" requiredMessage="Informe o campo descrição."
								maxlength="100" styleClass="estyleInputName" />
						</p:row>
					</p:column>
					<p:column>
						<p:row>
							<p:message for="filDescricao" />
						</p:row>
					</p:column>



					<p:column>
						<p:row>
							<h:outputLabel for="fil_endereco" id="labelfil_endereco"
								value="Endereço * : " />
						</p:row>
					</p:column>
					<p:column>
						<p:row>
							<p:inputText id="fil_endereco"
								value="#{filialBeanView.objetoSelecionado.fil_endereco}"
								required="false" requiredMessage="Informe o campo endereço."
								maxlength="100" styleClass="estyleInputName" />
						</p:row>
					</p:column>
					<p:column>
						<p:row>
							<p:message for="fil_endereco" />
						</p:row>
					</p:column>



					<p:column>
						<p:row>
							<h:outputLabel for="fil_fone" id="labelfil_fone"
								value="Telefone : " />
						</p:row>
					</p:column>
					<p:column>
						<p:row>
							<p:inputMask id="fil_fone" mask="(99)9999-9999"
								value="#{filialBeanView.objetoSelecionado.fil_fone}"
								required="false" requiredMessage="Informe o campo telefone."
								maxlength="100" styleClass="estiloIdCastro" />
						</p:row>
					</p:column>
					<p:column>
						<p:row>
							<p:message for="fil_fone" />
						</p:row>
					</p:column>




					<p:column>
						<p:row>
							<h:outputLabel for="fil_fax" id="labelfil_fax" value="Fax : " />
						</p:row>
					</p:column>
					<p:column>
						<p:row>
							<p:inputMask id="fil_fax" mask="(99)9999-9999"
								value="#{filialBeanView.objetoSelecionado.fil_fax}"
								required="false" requiredMessage="Informe o campo fax."
								maxlength="100" styleClass="estiloIdCastro" />
						</p:row>
					</p:column>
					<p:column>
						<p:row>
							<p:message for="fil_fax" />
						</p:row>
					</p:column>



					<p:column>
						<p:row>
							<h:outputLabel for="fil_cep" id="labelfil_cep" value="CEP : " />
						</p:row>
					</p:column>
					<p:column>
						<p:row>
							<p:inputMask id="fil_cep" mask="99999-999"
								value="#{filialBeanView.objetoSelecionado.fil_cep}"
								required="false" requiredMessage="Informe o campo cep."
								maxlength="100" styleClass="estiloIdCastro" />
						</p:row>
					</p:column>
					<p:column>
						<p:row>
							<p:message for="fil_cep" />
						</p:row>
					</p:column>




					<p:column>
						<p:row>
							<h:outputLabel for="bai_codigo" value="Bairro : "
								id="labelIdBairro" />
						</p:row>
					</p:column>
					<p:column>
						<p:row>
							<p:inputText id="bai_codigo" styleClass="estiloIdCastro"
								onblur="pesquisarBairroPerderFoco(this.value);addBairroFilial(this.value);"
								value="#{filialBeanView.objetoSelecionado.bai_codigo}"
								immediate="false" required="true"
								requiredMessage="Informe o bairro." />
							<p:commandButton id="buttonPesquisaBairro" icon="imgPesquisa"
								ajax="true" immediate="false" 
								actionListener="#{bairroBeanView.setarVariaveisNulas}"
								oncomplete="bairroDialog.show();"
								update=":formTemplate:bairroDialog"								
								process="@this" styleClass="buttonPesquisa" />
							<p:inputText id="bai_descricao" readonly="true" immediate="true"
								value="#{filialBeanView.objetoSelecionado.bai_codigo.bai_descricao}"
								required="true" requiredMessage="Informe o campo bairro."
								style="width: 350px;" />
						</p:row>
					</p:column>
					<p:column>
						<p:row>
							<p:message for="bai_codigo" />
						</p:row>
					</p:column>


					<p:column>
						<p:row>
							<h:outputLabel for="cid_codigo" value="Cidade : "
								id="labelIdCidade" />
						</p:row>
					</p:column>
					<p:column>
						<p:row>
							<p:inputText id="cid_codigo" styleClass="estiloIdCastro"
								onblur="pesquisarCidadePerderFoco(this.value);addCidadeFilial(this.value);"
								value="#{filialBeanView.objetoSelecionado.cid_codigo}"
								immediate="false" required="true"
								requiredMessage="Informe a cidade." />
							<p:commandButton id="buttonPesquisaCidadel" icon="imgPesquisa"
								ajax="true" immediate="false" 
								actionListener="#{cidadeBeanView.setarVariaveisNulas}"
								oncomplete="cidadeDialog.show();"
								update=":formTemplate:cidadeDialog"								
								styleClass="buttonPesquisa"
								process="@this" />
							<p:inputText id="cid_descricao" readonly="true" immediate="true"
								value="#{filialBeanView.objetoSelecionado.cid_codigo.cid_descricao}"
								required="true" requiredMessage="Informe o campo cidade."
								style="width: 350px;" />
						</p:row>
					</p:column>
					<p:column>
						<p:row>
							<p:message for="cid_codigo" />
						</p:row>
					</p:column>
					
					
					<p:column>
						<p:row>
							<h:outputLabel for="fil_statuscomissao" id="labelStatusComissao"
								value="Status comissão : " />
						</p:row>
					</p:column>
					<p:column>
						<p:row>
							<p:inputText id="fil_statuscomissao"
								value="#{filialBeanView.objetoSelecionado.fil_statuscomissao}"
								required="false" requiredMessage="Informe o status da comissão"
								maxlength="50"  styleClass="estyleInputName"/>
						</p:row>
					</p:column>
					<p:column>
						<p:row>
							<p:message for="fil_statuscomissao" />
						</p:row>
					</p:column>


					<p:column>
						<p:row>
							<h:outputLabel for="fil_enderecoemail" id="labelEmail"
								value="E-mail * : " />
						</p:row>
					</p:column>
					<p:column>
						<p:row>
							<p:inputText id="fil_enderecoemail"
								value="#{filialBeanView.objetoSelecionado.fil_enderecoemail}"
								required="false" requiredMessage="Informe o campo e-mail."
								maxlength="100" styleClass="estyleInputName" validatorMessage="Endereço de e-mail inválido.">
								<f:validateRegex pattern="[a-zA-Z0-9\-\_\.]+@[a-zA-Z0-9\-\_\.]+" />
							</p:inputText>
						</p:row>
					</p:column>
					<p:column>
						<p:row>
							<p:message for="fil_enderecoemail" />
						</p:row>
					</p:column>
				
				</p:panelGrid>
				
				<div class="espacoBranco" />
				
				<p:fieldset legend="Enviar e-mail">
				   <p:panelGrid id="gridFilialEmail" columns="3">

					<p:column>
						<p:row>
							<h:outputLabel for="fil_portaemail" id="labelPortaEmail"
								value="Porta e-mail : " />
						</p:row>
					</p:column>
					<p:column>
						<p:row>
							<p:inputText id="fil_portaemail"
								value="#{filialBeanView.objetoSelecionado.fil_portaemail}"
								required="false" requiredMessage="Informe o campo porta e-mail."
								maxlength="10" styleClass="estiloIdCastro" />
						</p:row>
					</p:column>
					<p:column>
						<p:row>
							<p:message for="fil_portaemail" />
						</p:row>
					</p:column>


					<p:column>
						<p:row>
							<h:outputLabel for="fil_autenticaremail" id="labelAutenticar"
								value="Autenticar e-mail * : " />
						</p:row>
					</p:column>
					<p:column>
						<p:row>
							<p:selectBooleanCheckbox
							    id="fil_autenticaremail"
								value="#{filialBeanView.objetoSelecionado.fil_autenticaremail}"/>
						</p:row>
					</p:column>
					<p:column>
						<p:row>
							<p:message for="fil_autenticaremail" />
						</p:row>
					</p:column>


				   <p:column>
						<p:row>
							<h:outputLabel for="fil_servidoremail" id="labelSeridorEmail"
								value="Servidor E-mail : " />
						</p:row>
					</p:column>
					<p:column>
						<p:row>
							<p:inputText id="fil_servidoremail"
								value="#{filialBeanView.objetoSelecionado.fil_servidoremail}"
								required="false" requiredMessage="Informe o campo servidor e-mail."
								maxlength="100" style="width:462px;" 
								styleClass="estyleInputName" validatorMessage="Servidor de e-mail inválido.">
								<f:validateRegex pattern="[a-zA-Z0-9\-\_\.]+"/>
							</p:inputText>
						</p:row>
					</p:column>
					<p:column>
						<p:row>
							<p:message for="fil_servidoremail" />
						</p:row>
					</p:column>



					<p:column>
						<p:row>
							<h:outputLabel for="fil_segurancaemail" id="labelSeguranca"
								value="Segurança e-mail : " />
						</p:row>
					</p:column>
					<p:column>
						<p:row>
							<p:selectOneMenu id="fil_segurancaemail"
								value="#{filialBeanView.objetoSelecionado.fil_segurancaemail}"
								required="false"
								requiredMessage="Informe o campo segurança e-mail."
								style="width: 123px;">
								<f:selectItems value="#{filialBeanView.listSegurancaoEmail}"/>
							</p:selectOneMenu>
						</p:row>
					</p:column>
					<p:column>
						<p:row>
							<p:message for="fil_segurancaemail" />
						</p:row>
					</p:column>



					<p:column>
						<p:row>
							<h:outputLabel for="fil_autenticacaoemail" id="labelAutenticacao"
								value="Autenticação e-mail * : " />
						</p:row>
					</p:column>
					<p:column>
						<p:row>
							<p:selectOneMenu id="fil_autenticacaoemail"
								value="#{filialBeanView.objetoSelecionado.fil_autenticacaoemail}"
								required="true" style="width: 123px;"
								requiredMessage="Informe o campo autenticação de e-mail.">
								<f:selectItems  value="#{filialBeanView.listAutenticacaoEmail}"/>
							</p:selectOneMenu>
						</p:row>
					</p:column>
					<p:column>
						<p:row>
							<p:message for="fil_autenticacaoemail" />
						</p:row>
					</p:column>




					<p:column>
						<p:row>
							<h:outputLabel for="fil_usuarioemail" id="labelUserEmail"
								value="Usuário e-mail : " />
						</p:row>
					</p:column>
					<p:column>
						<p:row>
							<p:inputText id="fil_usuarioemail"
								value="#{filialBeanView.objetoSelecionado.fil_usuarioemail}"
								required="false" requiredMessage="Informe o usuário e-mail."
								maxlength="100" style="width:462px;">
								<f:validateRegex pattern="[a-zA-Z0-9\-\_\.]+@[a-zA-Z0-9\-\_\.]+" />
							</p:inputText>
						</p:row>
					</p:column>
					<p:column>
						<p:row>
							<p:message for="fil_usuarioemail" />
						</p:row>
					</p:column>


					<p:column>
						<p:row>
							<h:outputLabel for="fil_senhaemail" id="labelSenhaEmail"
								value="Senha e-mail : " />
						</p:row>
					</p:column>
					<p:column>
						<p:row>
							<p:inputText id="fil_senhaemail"
								value="#{filialBeanView.objetoSelecionado.fil_senhaemail}"
								required="false" requiredMessage="Informe o senha e-mail."
								maxlength="100" style="width:462px;" />
						</p:row>
					</p:column>
					<p:column>
						<p:row>
							<p:message for="fil_senhaemail" />
						</p:row>
					</p:column>
					
				
				</p:panelGrid>
			  </p:fieldset>

			</p:panel>

			<div class="espacoBranco" />

			<util:botoesCrud managedBeanView="#{filialBeanView}"
				camposReload=":formTemplate:msg, tableResult" 
				botaoNovo = "#{contextoBean.possuiAcesso('FILIAL_NOVO', 'ADMIN')}"
				botaoSalvar = "#{contextoBean.possuiAcesso('FILIAL_NOVO', 'ADMIN') and filialBeanView.objetoSelecionado.fil_codigo == null}"
				botaoAtualizar = "#{contextoBean.possuiAcesso('FILIAL_EDITAR', 'ADMIN') and filialBeanView.objetoSelecionado.fil_codigo != null}"
				botaoExcluir = "#{contextoBean.possuiAcesso('FILIAL_EXCLUIR', 'ADMIN')}"/>
		</h:form>

		<script type="text/javascript" charset="UTF-8">
			addFocoAoCampo('filDescricao');
			permitirApenasNumero('fil_portaemail');
			permitirApenasNumero('bai_codigo');
			permitirApenasNumero('cid_codigo');
			gerenciaTeclaEnter();
		</script>


		<div class="espacoBranco" />

		<p:dataTable id="tableResult" value="#{filialBeanView.list}" rendered="#{filialBeanView.list.list.size() > 0}"
			var="objeto" rows="10" paginatorPosition="bottom" paginator="true"
			emptyMessage="Não existem valores para exibição." lazy="true"
			paginatorTemplate=" {FirstPageLink}
								   {PreviousPageLink} {PageLinks} 
	 							   {NextPageLink} {LastPageLink} {RowsPerPageDropdown}">

			<ui:include src="/resources/components/colunasDataTableFilial.xhtml" />

		</p:dataTable>

		<p:dialog widgetVar="bairroDialog" id="bairroDialog" width="1000"
			modal="true" resizable="false" height="400"
			header="Consulta de bairro" appendToBody="false" dynamic="true">
			<util:pesquisa managedBeanView="#{bairroBeanView}"
				nomePesquisa="Pesquisa de Bairro"
				colunasGridDataTableList="/resources/components/colunasDataTableBairro.xhtml"
				exibirBotaoAdd="true" ocultaNovo="true"
				funcaoJavaScript="bairroDialog.hide(),addBairroSelecionadoFilial('#{objeto.json}')">
			</util:pesquisa>
		</p:dialog>


		<p:dialog widgetVar="cidadeDialog" id="cidadeDialog" width="1000"
			modal="true" resizable="false" height="400"
			header="Consulta de cidade" appendToBody="false" dynamic="true">
			<util:pesquisa managedBeanView="#{cidadeBeanView}"
				nomePesquisa="Pesquisa de Cidade"
				colunasGridDataTableList="/resources/components/colunasDataTableCidade.xhtml"
				exibirBotaoAdd="true" ocultaNovo="true"
				funcaoJavaScript="cidadeDialog.hide(),addCidadeSelecionadoFilial('#{objeto.json}')">
			</util:pesquisa>
		</p:dialog>

	</ui:define>
</ui:composition>
</html>